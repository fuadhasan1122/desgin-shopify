{% style %}
  .hero-gradient-bg-{{ section.id }} {
    background: radial-gradient(circle at 75% 50%, #2a2a2a 0%, #111111 100%);
  }

  /* Sticker with Peel Effect */
  .sticker-badge-{{ section.id }} {
    position: absolute;
    width: 140px; /* Increased size */
    height: 140px;
    background: #fde047;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 30;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    transform: rotate(7deg);
  }

  .sticker-badge-{{ section.id }}::after {
    content: "";
    position: absolute;
    bottom: 2px;
    right: 8px;
    width: 45px;
    height: 35px;
    background: #ffffff;
    border-radius: 50% 10% 50% 40%;
    transform: rotate(-10deg);
    box-shadow: -3px -3px 5px rgba(0,0,0,0.1);
  }

  /* Big Timer Styling */
  .countdown-pill-{{ section.id }} {
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.75rem 1.25rem;
  }

  .timer-val {
    font-size: 1.25rem; /* Large font for numbers */
    font-weight: 800;
    color: #ffffff;
  }

  .timer-unit {
    font-size: 1.1rem;
    color: #9ca3af; /* gray-400 */
    margin: 0 0.25rem;
  }

  /* Slider Logic Classes */
  .hero-slide-{{ section.id }}.hidden { display: none; }
  .hero-slide-{{ section.id }}.slide-active { 
    display: grid; 
    animation: heroFadeIn 0.6s ease-out forwards; 
  }
  
  @keyframes heroFadeIn {
    from { opacity: 0; transform: scale(0.98); }
    to { opacity: 1; transform: scale(1); }
  }
{% endstyle %}

<section class="max-w-[1380px] mx-auto px-4 py-2 font-sans" id="HeroWrapper-{{ section.id }}">
  <div class="relative hero-gradient-bg-{{ section.id }}  mt-0 pt-0 rounded-[20px] overflow-hidden h-[600px]">
    
    {% for block in section.blocks %}
      <div class="hero-slide-{{ section.id }} {% if forloop.first %}slide-active{% else %}hidden{% endif %} grid md:grid-cols-2 items-center px-10 md:px-20 py-16 gap-12" {{ block.shopify_attributes }}>
        
        <div class="relative z-10 mr-0">
          {% if block.settings.show_timer %}
            <div class="inline-flex items-center gap-3 countdown-pill-{{ section.id }} rounded-lg  mt-2 mb-8">
              <svg class="w-6 h-6 text-[#fde047]" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 18c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67V7z"/></svg>
              <div class="countdown-timer flex items-center" data-date="{{ block.settings.end_date }}">
                <span class="text-white font-bold">Loading...</span>
              </div>
            </div>
          {% endif %}

          <h1 class="text-white text-5xl md:text-[72px] font-extrabold leading-[1.05] mb-6 tracking-tight">
            {{ block.settings.heading }}
          </h1>

          <p class="text-gray-400 text-lg md:text-xl max-w-md mb-10 leading-relaxed font-medium">
            {{ block.settings.subtext }}
          </p>

          <a href="{{ block.settings.btn_link }}" class="inline-block bg-[#fde047] text-black font-black px-12 py-4 rounded-xl text-lg hover:bg-yellow-300 transition-colors duration-300">
            {{ block.settings.btn_label }}
          </a>
        </div>

        <div class="relative flex justify-center items-center">
          <div class="relative w-full max-w-[520px]">
            {% if block.settings.product_image != blank %}
              <img src="{{ block.settings.product_image | img_url: '1000x' }}" class="w-full h-auto drop-shadow-[0_35px_35px_rgba(0,0,0,0.6)] object-contain">
            {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'w-full h-96 bg-gray-800 rounded-3xl opacity-50' }}
            {% endif %}

            <div class="sticker-badge-{{ section.id }} top-0 right-0 md:-right-4">
              <span class="text-[11px] font-bold uppercase tracking-widest text-black">Save Up to</span>
              <div class="flex items-start">
                <span class="text-[58px] font-black text-black leading-none">{{ block.settings.discount_val }}</span>
                <span class="text-2xl font-bold text-black mt-2">%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}

    <div class="absolute bottom-10 left-1/2 -translate-x-1/2 flex items-center gap-3">
      <div class="flex gap-2" id="Dots-{{ section.id }}">
        {% for block in section.blocks %}
          <span class="h-2 transition-all duration-300 rounded-full {% if forloop.first %}w-12 bg-white{% else %}w-3 bg-white/30{% endif %}"></span>
        {% endfor %}
      </div>
    </div>

    <button id="nextBtn-{{ section.id }}" class="absolute right-8 top-1/2 -translate-y-1/2 bg-white w-14 h-14 rounded-full flex items-center justify-center shadow-xl hover:scale-110 transition-transform z-20">
      <svg class="w-7 h-7 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="3"><path d="M9 5l7 7-7 7"></path></svg>
    </button>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const sectionId = "{{ section.id }}";
  const slides = document.querySelectorAll('.hero-slide-' + sectionId);
  const dots = document.querySelectorAll('#Dots-' + sectionId + ' span');
  const nextBtn = document.getElementById('nextBtn-' + sectionId);
  let currentIndex = 0;

  // Slider Logic
  function updateSlider(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('slide-active', i === index);
      slide.classList.toggle('hidden', i !== index);
    });
    dots.forEach((dot, i) => {
      dot.className = i === index ? 'h-2 w-12 bg-white rounded-full transition-all' : 'h-2 w-3 bg-white/30 rounded-full transition-all';
    });
  }

  nextBtn.addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % slides.length;
    updateSlider(currentIndex);
  });

  // Timer Logic
  function startTimer() {
    const timers = document.querySelectorAll('.countdown-timer');
    timers.forEach(timer => {
      const endDate = new Date(timer.dataset.date).getTime();

      const update = () => {
        const now = new Date().getTime();
        const diff = endDate - now;

        if (diff <= 0) {
          timer.innerHTML = "<span class='timer-val'>SALE EXPIRED</span>";
          return;
        }

        const d = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
        const s = Math.floor((diff % (1000 * 60)) / 1000).toString().padStart(2, '0');

        timer.innerHTML = `
          <span class="timer-val">${d}</span><span class="timer-unit">d</span> <span class="text-gray-500 font-bold">:</span>
          <span class="timer-val">${h}</span><span class="timer-unit">h</span> <span class="text-gray-500 font-bold">:</span>
          <span class="timer-val">${m}</span><span class="timer-unit">m</span> <span class="text-gray-500 font-bold">:</span>
          <span class="timer-val">${s}</span><span class="timer-unit">s</span>
        `;
      };
      
      update();
      setInterval(update, 1000);
    });
  }

  startTimer();
});
</script>

{% schema %}
{
  "name": "Custom Hero Section",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Hero Slide",
      "settings": [
        { "type": "image_picker", "id": "product_image", "label": "Product Image" },
        { "type": "textarea", "id": "heading", "label": "Heading", "default": "Electronics Sale Live Now – 24 Hours to Save" },
        { "type": "textarea", "id": "subtext", "label": "Subtext", "default": "Your next gadget is waiting – up to 60% off during our flash sale." },
        { "type": "text", "id": "btn_label", "label": "Button Label", "default": "Shop Now" },
        { "type": "url", "id": "btn_link", "label": "Button Link" },
        { "type": "header", "content": "Sticker & Timer" },
        { "type": "text", "id": "discount_val", "label": "Discount Value", "default": "60" },
        { "type": "checkbox", "id": "show_timer", "label": "Show Timer", "default": true },
        { "type": "text", "id": "end_date", "label": "End Date (YYYY/MM/DD)", "default": "2026/12/31" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Hero Section",
      "blocks": [ { "type": "slide" } ]
    }
  ]
}
{% endschema %}