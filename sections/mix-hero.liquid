<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
  .hero-swiper-container { width: 100%; height: 650px; border-radius: 1.5rem; overflow: hidden; position: relative; }
  .swiper { width: 100%; height: 100%; }
  
  /* The "Save Up To" Badge Styling */
  .discount-sticker {
    background-color: #fde047; /* Bright Yellow */
    color: #000;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    border: 4px solid white;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    position: absolute;
    top: -20px;
    right: -20px;
    transform: rotate(12deg);
    z-index: 50; /* Ensures it sits on top of the image */
  }

  .slide-overlay {
    position: absolute; inset: 0;
    background: linear-gradient(90deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.2) 100%);
    z-index: 10;
  }
</style>

<section class="max-w-[1400px] mx-auto px-4 py-8 dark:bg-gray-900 transition-colors">
  <div class="hero-swiper-container shadow-2xl">
    <div class="swiper myHeroSwiper">
      <div class="swiper-wrapper">
        
        {% for block in section.blocks %}
          <div class="swiper-slide flex items-center" {{ block.shopify_attributes }}>
            
            <div class="absolute inset-0 z-0">
              {% if block.settings.bg_image != blank %}
                <img src="{{ block.settings.bg_image | image_url: width: 2000 }}" class="w-full h-full object-cover" alt="Background">
              {% else %}
                <div class="w-full h-full bg-gray-800"></div>
              {% endif %}
              <div class="slide-overlay"></div>
            </div>

            <div class="container mx-auto px-8 lg:px-20 relative z-20 grid lg:grid-cols-2 items-center h-full gap-10">
              
              <div class="text-white space-y-6">
                {% if block.settings.end_date != blank %}
                  <div class="flex items-center gap-3 bg-white/10 backdrop-blur-md w-fit px-4 py-2 rounded-lg border border-white/20">
                    <span class="text-yellow-400 font-bold">‚è±</span>
                    <div class="countdown-timer flex gap-2 font-mono text-sm font-bold" data-date="{{ block.settings.end_date }}">
                      <span><span class="days">00</span>d</span>:
                      <span><span class="hours">00</span>h</span>:
                      <span><span class="minutes">00</span>m</span>:
                      <span><span class="seconds">00</span>s</span>
                    </div>
                  </div>
                {% endif %}

                <h2 class="text-5xl lg:text-7xl font-black leading-tight">{{ block.settings.heading }}</h2>
                <p class="text-lg text-gray-200 max-w-md">{{ block.settings.subheading }}</p>
                
                <a href="{{ block.settings.button_link }}" class="inline-block bg-[#fde047] text-black px-10 py-4 rounded-xl font-black hover:scale-105 transition-transform shadow-lg">
                  {{ block.settings.button_label }}
                </a>
              </div>

              <div class="hidden lg:flex justify-center relative">
                <div class="relative">
                  {% if block.settings.product_image != blank %}
                    <img src="{{ block.settings.product_image | image_url: width: 600 }}" class="max-h-[450px] object-contain drop-shadow-2xl">
                  {% endif %}
                  
                  {% if block.settings.discount_text != blank %}
                    <div class="discount-sticker">
                      <span class="text-[10px] uppercase tracking-tighter">Save Up to</span>
                      <span class="text-4xl leading-none">{{ block.settings.discount_text }}</span>
                    </div>
                  {% endif %}
                </div>
              </div>

            </div>
          </div>
        {% endfor %}

      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>

<script>
  window.addEventListener('load', function() {
    const swiper = new Swiper('.myHeroSwiper', {
      loop: true,
      speed: 1000,
      effect: 'fade',
      autoplay: { delay: 5000 },
      pagination: { el: '.swiper-pagination', clickable: true },
    });

    function startTimers() {
      document.querySelectorAll('.countdown-timer').forEach(timer => {
        const endTime = new Date(timer.dataset.date).getTime();
        const update = () => {
          const diff = endTime - new Date().getTime();
          if (diff < 0) return;
          timer.querySelector('.days').innerText = Math.floor(diff / 86400000).toString().padStart(2, '0');
          timer.querySelector('.hours').innerText = Math.floor((diff % 86400000) / 3600000).toString().padStart(2, '0');
          timer.querySelector('.minutes').innerText = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
          timer.querySelector('.seconds').innerText = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
        };
        setInterval(update, 1000);
        update();
      });
    }
    startTimers();
  });
</script>

{% schema %}
{
  "name": "Hero Slider Final",
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "bg_image", "label": "Background Image" },
        { "type": "image_picker", "id": "product_image", "label": "Floating Product Image" },
        { "type": "text", "id": "discount_text", "label": "Discount Text (e.g. 60%)", "default": "60%" },
        { "type": "text", "id": "heading", "label": "Heading", "default": "Flash Sale Live" },
        { "type": "text", "id": "subheading", "label": "Subheading", "default": "Get the best gadgets at half price." },
        { "type": "text", "id": "button_label", "label": "Button Label", "default": "Shop Now" },
        { "type": "url", "id": "button_link", "label": "Link" },
        { "type": "text", "id": "end_date", "label": "Date (MM/DD/YYYY HH:MM:SS)", "default": "12/31/2026 23:59:59" }
      ]
    }
  ],
  "presets": [{ "name": "Hero Slider Final" }]
}
{% endschema %}