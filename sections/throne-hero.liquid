{% schema %}
{
  "name": "Throne Hero Slider",
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "left_image", "label": "Main Image" },
        { "type": "text", "id": "title_white", "label": "Title White", "default": "Excellence" },
        { "type": "text", "id": "title_highlight", "label": "Title Highlight", "default": "Tuned for" },
        { "type": "text", "id": "title_bottom", "label": "Title Bottom", "default": "Every Ear" },
        { "type": "textarea", "id": "subtext", "label": "Subtext", "default": "Earbuds delivering pure sound." },
        { "type": "image_picker", "id": "product_image", "label": "Product Image" },
        { "type": "text", "id": "prod_title", "label": "Product Title", "default": "True Vibe Pods" },
        { "type": "text", "id": "prod_price", "label": "Price", "default": "$132.99" },
        { "type": "url", "id": "btn_link", "label": "Button Link" }
      ]
    }
  ],
  "presets": [{"name": "Throne Hero Slider"}]
}
{% endschema %}

<section class="w-full bg-white-[#0a0a0a] px-4 py-4 md:px-6 md:py-6 overflow-hidden relative z-1">
  <div id="hero-slider" class="max-w-[1440px] mx-auto relative h-[600px] md:h-[85vh]">

    {% for block in section.blocks %}
      <div class="hero-slide absolute inset-0 opacity-0 transition-opacity duration-700 ease-in-out {% if forloop.first %}opacity-100 z-1{% endif %}" data-index="{{ forloop.index0 }}">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-4 h-full">

          <div class="md:col-span-7 relative overflow-hidden rounded-[2rem] h-full">
            <img src="{{ block.settings.left_image | image_url: width: 1500 }}" class="absolute inset-0 w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
            <div class="absolute bottom-10 left-10 z-10">
              <h1 class="text-white text-5xl md:text-7xl font-bold leading-none mb-4 uppercase">
                {{ block.settings.title_white }}
                <span class="text-[#ff6b00]">{{ block.settings.title_highlight }}</span><br>{{ block.settings.title_bottom }}
              </h1>
              <p class="text-gray-300 max-w-sm">{{ block.settings.subtext }}</p>
            </div>
          </div>

          <div class="md:col-span-5 flex flex-col items-center justify-between p-12 bg-[#0d1b2a] rounded-[2rem] relative text-center">
            <div class="z-10">
              <h2 class="text-[#00ff9d] text-4xl font-bold uppercase">{{ block.settings.prod_title }}</h2>
              <p class="text-white opacity-70 uppercase tracking-widest text-xs mt-2">Starts at {{ block.settings.prod_price }}</p>
            </div>
            <img src="{{ block.settings.product_image | image_url: width: 600 }}" class="w-full max-w-[280px] z-10 drop-shadow-2xl">
            <div class="flex gap-4 z-10">
              <a href="{{ block.settings.btn_link }}" class="px-8 py-3 bg-white text-black font-bold rounded-full uppercase text-xs font-bold tracking-widest hover:bg-gray-200">Explore</a>
              <a href="{{ block.settings.btn_link }}" class="px-8 py-3 border border-white/30 text-white font-bold rounded-full uppercase text-xs font-bold tracking-widest hover:bg-white/10">Shop now</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}

    <button onclick="prevSlide()" class="absolute left-8 top-1/2 -translate-y-1/2 z-[5] w-12 h-12 bg-white/20 hover:bg-white text-white hover:text-black rounded-full flex items-center justify-center transition-all">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
    </button>
    <button onclick="nextSlide()" class="absolute right-8 top-1/2 -translate-y-1/2 z-[5] w-12 h-12 bg-white/20 hover:bg-white text-white hover:text-black rounded-full flex items-center justify-center transition-all">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M9 5l7 7-7 7" /></svg>
    </button>
  </div>
</section>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll('.hero-slide');

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.remove('opacity-100', 'z-1');
      slide.classList.add('opacity-0', 'z-0');
      if (i === index) {
        slide.classList.add('opacity-100', 'z-1');
        slide.classList.remove('opacity-0', 'z-0');
      }
    });
  }

  function nextSlide() { currentSlide = (currentSlide + 1) % slides.length; showSlide(currentSlide); }
  function prevSlide() { currentSlide = (currentSlide - 1 + slides.length) % slides.length; showSlide(currentSlide); }
</script>