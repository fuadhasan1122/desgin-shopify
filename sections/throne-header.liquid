{% schema %}
{
  "name": "Throne Header",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#00FF9D"
    },
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "unit": "px",
      "label": "Logo Width",
      "default": 120
    },
    {
      "type": "link_list",
      "id": "menu_selection",
      "label": "Select Menu",
      "default": "main-menu"
    }
  ],
  "presets": [{"name": "Throne Header"}]
}
{% endschema %}

<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap');
  
  .throne-font { 
    font-family: 'Inter', sans-serif; 
    letter-spacing: -0.02em; 
  }
  
  
  #shopify-section-{{ section.id }} {
    position: relative;
    z-index: 9999;
  }

  .site-header-wrapper {
    position: sticky;
    top: 0;
    width: 100%;
    z-index: 10000;
  }
</style>

<div class="site-header-wrapper">
<header 
  x-data="{ mobileMenuOpen: false, megaMenuOpen: false }" 
  @mouseleave="megaMenuOpen = false"
  class="w-full relative throne-font shadow-sm" 
  style="background-color: {{ section.settings.bg_color }};">
  
  <div class="w-max-1440px mt-5 ml-5 mr-5  px-10 h-20 flex items-center justify-between bg-green-400 text-black rounded-full shadow-lg hover:rounded-b-none">


    <div class="flex items-center gap-4 md:gap-12">
      <button @click="mobileMenuOpen = !mobileMenuOpen" class="block md:hidden p-2">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"></path></svg>
      </button>

      <a href="/" class="block">
        {% if section.settings.logo_image != blank %}
          <img src="{{ section.settings.logo_image | image_url: width: 400 }}" style="width: {{ section.settings.logo_width }}px;" class="h-auto" alt="{{ shop.name }}">
        {% else %}
          <span class="font-black text-xl md:text-2xl uppercase tracking-tighter">THRONE</span>
        {% endif %}
      </a>

      <nav class="">
        <ul class="flex space-x-10 items-center">
          {%- assign main_menu = section.settings.menu_selection -%}
          {% for link in linklists[main_menu].links %}
            {%- assign is_mega = false -%}{%- if link.links.size > 0 -%}{%- assign is_mega = true -%}{%- endif -%}

            <li class="py-7" @mouseenter="megaMenuOpen = {{ is_mega }}">
                    <a href="{{ link.url }}" class="w-max-1440px font-bold text-[13px] tracking-wide hover:opacity-50 transition-all  flex items-center gap-1 ">
                 {{ link.title }}
                {% if is_mega %}
                  <svg class="w-3 h-10 transition-transform duration-300" :class="megaMenuOpen ? 'rotate-180' : ''" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                {% endif %}
              </a>
            </li>
          {% endfor %}
        </ul>
      </nav>
    </div>

    <div class="flex items-center space-x-5 md:space-x-7">
      <button class="hover:scale-110 transition-transform">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35"></path></svg>
      </button>
      
      <a href="/account" class="hover:scale-110 transition-transform">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </a>

      <a href="/cart" class="hover:scale-110 transition-transform">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4Z"></path><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
      </a>
    </div>
  </div>

  <div 
    x-show="megaMenuOpen"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 -translate-y-4"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-4"
    @mouseenter="megaMenuOpen = true"
    class="absolute mt-5 mb-50 left-4 right-4 bg-white rounded-b-[35px]   shadow-[0_30px_60px_-15px_rgba(0,0,0,0.3)] ..."


  >
    <div class="max-w-[1300px] mx-auto grid grid-cols-1 md:grid-cols-5 gap-12">
      {% for link in linklists[main_menu].links %}
        {% if link.links.size > 0 %}
          <div class="md:col-span-1 flex flex-col gap-5 border-r border-gray-100 pr-8 text-left">
            {% for childlink in link.links %}
              <a href="{{ childlink.url }}" class="text-xl font-extrabold uppercase tracking-tighter hover:text-gray-400 transition-colors">
                {{ childlink.title }}
              </a>
            {% endfor %}
          </div>

          <div class="md:col-span-4 grid grid-cols-2 lg:grid-cols-4 gap-y-10 gap-x-8 text-left">
            {% for childlink in link.links %}
              <div class="flex flex-col gap-4">
                <h3 class="font-bold text-sm text-gray-400 uppercase tracking-widest">{{ childlink.title }}</h3>
                <ul class="flex flex-col gap-2">
                  {% for grandchildlink in childlink.links %}
                    <li><a href="{{ grandchildlink.url }}" class="text-[14px] text-black hover:opacity-50 transition-colors font-semibold">{{ grandchildlink.title }}</a></li>
                  {% endfor %}
                </ul>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</header>
</div>