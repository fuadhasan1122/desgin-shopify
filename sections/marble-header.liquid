
{%- style -%}
  #section-{{ section.id }} {
    --top-bar-bg: {{ section.settings.bg_color_top }};
    --top-bar-text: {{ section.settings.text_color_top }};
    --header-color: {{ section.settings.color_header }};
    --logo-color: {{ section.settings.color_logo }};
    --hero-title-color: {{ section.settings.color_hero_title }};
    --hero-sub-color: {{ section.settings.color_hero_sub }};
    --btn-bg: {{ section.settings.color_btn_bg }};
    --btn-text: {{ section.settings.color_btn_text }};
  }

  /* TOP BAR LOGIC */
  .top-bar-v3 {
    background-color: var(--top-bar-bg);
    color: var(--top-bar-text);
    padding: 10px 0;
    font-size: 11px;
    position: relative;
    z-index: 9999;
    font-family: sans-serif;
  }
  .top-bar-container {
    max-width: 1600px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 40px;
  }
  .header-icons {
    gap : 40px;
    display: flex;
    
  }
  .top-bar-left, .top-bar-right { display: flex; align-items: center; gap: 20px; flex: 1; }
  .top-bar-center { flex: 2; text-align: center; text-transform: uppercase; font-weight: 500; letter-spacing: 1px; }
  .top-bar-right { justify-content: flex-end;gap:20px; }
  .top-bar-v3 a { color: inherit; text-decoration: none; }

  /* SELECTORS */
  .disclosure { position: relative; margin-left: 20px; display: flex; }
  .disclosure__button {
    background: none; border: none; font-size: 11px; display: flex;
    align-items: center; gap: 6px; cursor: pointer; color: inherit; text-transform: uppercase;
  }
  .disclosure__list {
    position: absolute; top: 100%; right: 0; background: #ffffff; color: #333333;
    list-style: none; padding: 10px 0; margin-top: 8px; border-radius: 2px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); min-width: 200px; z-index: 10000;
  }
  .disclosure__item a { display: block; padding: 10px 20px; text-decoration: none; color: #333333 !important; }
  .disclosure__item a:hover { background: #f0f0f0; }

  /* HEADER & HERO */
  .marble-header {
    position: absolute; top: 0px; left: 0; width: 100%; z-index: 1000; padding: 30px 40px;
  }
  .header-inner { display: flex; justify-content: space-between; align-items: center; max-width: 1600px; margin: 0 auto; }
  .logo-text { font-size: 32px; font-family: serif; letter-spacing: 8px; text-transform: uppercase; color: var(--logo-color); text-decoration: none; }
  .nav-links a { text-decoration: none; font-size: 16px; color: var(--header-color); margin-right: 25px; font-weight: 800; }

  .split-hero-container { display: flex; height: 100vh; width: 100%; }
  .hero-panel { flex: 1; background-size: cover; background-position: center; position: relative; display: flex; align-items: flex-end; padding: 80px; }
  .panel-title { font-size: 60px; line-height: 1.1; margin-bottom: 40px; font-weight: 700; color: var(--hero-title-color); }
  .marble-btn { display: inline-block; padding: 18px 50px; text-decoration: none; font-weight: bold; background: var(--btn-bg); color: var(--btn-text); }

  @media (max-width: 768px) {
    .top-bar-left, .top-bar-right, .nav-links { display: none; }
    .split-hero-container { flex-direction: column; }
  }
  /* Container for both forms to sit side-by-side */
.top-bar-right {
  display: flex;
  align-items: center;
  gap: 20px; /* Space between Country and Language */
  justify-content: flex-end;
}

/* Ensure the localization forms themselves are inline */
.localization-form {
  display: inline-flex;
  align-items: center;
}

/* The actual button/trigger for the dropdown */
.disclosure__button {
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap; /* Prevents text from wrapping to a second line */
}

/* If you have multiple disclosure divs, make them sit inline */
.disclosure {
  display: inline-block;
  vertical-align: middle;
}

/* Adjust image/flag size and alignment */
.disclosure__button img {
  width: 20px;
  height: auto;
  display: block;
}

/* Remove any default margins that push elements to new lines */
.top-bar-right form, 
.top-bar-right p {
  margin: 0;
  display: flex;
  align-items: center;
}
{%- endstyle -%}

<div id="section-{{ section.id }}">
  <div class="top-bar-v3">
    <div class="top-bar-container">
      <div class="top-bar-left">
        <a href="tel:{{ section.settings.phone }}">{{ section.settings.phone }}</a>
        <span>|</span>
        <a href="mailto:{{ section.settings.email }}">{{ section.settings.email }}</a>
      </div>
      <div class="top-bar-center">{{ section.settings.announcement }}</div>
      <div class="top-bar-right">
        
        {%- if section.settings.show_currency -%}
          <div class="disclosure">
            {%- form 'localization', id: 'HeaderCountryForm' -%}
              <button type="button" class="disclosure__button" onclick="this.nextElementSibling.toggleAttribute('hidden')">
                {{ localization.country | image_url: width: 20 | image_tag }}
                {{ localization.country.name }} ({{ localization.country.currency.symbol }} {{ localization.country.currency.iso_code }})
              </button>
              <ul class="disclosure__list" hidden>
                {%- for country in localization.available_countries -%}
                  <li class="disclosure__item">
                    <a href="#" data-value="{{ country.iso_code }}" onclick="setLoc(event, this, 'country_code')">
                      {{ country.name }} ({{ country.currency.iso_code }})
                    </a>
                  </li>
                {%- endfor -%}
              </ul>
              <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}">
            {%- endform -%}
          </div>
        {%- endif -%}

        {%- if section.settings.show_language -%}
          <div class="disclosure">
            {%- form 'localization', id: 'HeaderLanguageForm' -%}
              <button type="button" class="disclosure__button" onclick="this.nextElementSibling.toggleAttribute('hidden')">
                {{ localization.language.endonym_name | capitalize }}
              </button>
              <ul class="disclosure__list" hidden>
                {%- for language in localization.available_languages -%}
                  <li class="disclosure__item">
                    <a href="#" data-value="{{ language.iso_code }}" onclick="setLoc(event, this, 'locale_code')">
                      {{ language.endonym_name | capitalize }}
                    </a>
                  </li>
                {%- endfor -%}
              </ul>
              <input type="hidden" name="locale_code" value="{{ localization.language.iso_code }}">
            {%- endform -%}
          </div>
        {%- endif -%}

        <button class="top-bar-close" style="background:none; border:none; color:inherit; cursor:pointer; font-size:16px; margin-left:15px;" onclick="this.closest('.top-bar-v3').style.display='none'; document.querySelector('.marble-header').style.top='0';">âœ•</button>
      </div>
    </div>
  </div>

  <section style="position: relative;">
    <header class="marble-header">
      <div class="header-inner">
        <nav class="nav-links">
          {% for link in linklists[section.settings.menu].links %}
            <a href="{{ link.url }}">{{ link.title }}</a>
          {% endfor %}
        </nav>
        <a href="/" class="logo-text">{{ section.settings.logo_text | default: 'MARBLE' }}</a>
        <div class="header-icons">
          <img src="{{ 'search-icon.png' | asset_url }}" width="22" style="filter: brightness(0) invert(1);">
          <img src="{{ 'user.png' | asset_url }}" width="22" style="filter: brightness(0) invert(1);">
          <img src="{{ 'cart.png' | asset_url }}" width="22" style="filter: brightness(0) invert(1);">
          
        </div>
      </div>
    </header>

    <div class="split-hero-container">
      <div class="hero-panel" style="background-image: url('{{ section.settings.image_1 | img_url: '1600x' }}');">
        <div class="panel-content">
          <p style="color: var(--hero-sub-color);">{{ section.settings.subheading_1 }}</p>
          <h2 class="panel-title">{{ section.settings.heading_1 }}</h2>
          <a href="{{ section.settings.link_1 }}" class="marble-btn">Shop Now</a>
        </div>
      </div>
      <div class="hero-panel" style="background-image: url('{{ section.settings.image_2 | img_url: '1600x' }}');">
        <div class="panel-content">
          <p style="color: var(--hero-sub-color);">{{ section.settings.subheading_2 }}</p>
          <h2 class="panel-title">{{ section.settings.heading_2 }}</h2>
          <a href="{{ section.settings.link_2 }}" class="marble-btn">Lookbook</a>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  function setLoc(e, el, name) {
    e.preventDefault();
    const f = el.closest('form');
    f.querySelector(`input[name="${name}"]`).value = el.dataset.value;
    f.submit();
  }
</script>

{% schema %}
{
  "name": "Marble Ultimate",
  "settings": [
    { "type": "header", "content": "Top Bar" },
    { "type": "color", "id": "bg_color_top", "label": "Top Bar Background", "default": "#000000" },
    { "type": "color", "id": "text_color_top", "label": "Top Bar Text", "default": "#ffffff" },
    { "type": "text", "id": "phone", "label": "Phone", "default": "+1-541-754-30" },
    { "type": "text", "id": "email", "label": "Email", "default": "hey@bigstart.io" },
    { "type": "text", "id": "announcement", "label": "Promo", "default": "15% OFF ON ALL DRESSES" },
    { "type": "checkbox", "id": "show_currency", "label": "Show Country/Currency", "default": true },
    { "type": "checkbox", "id": "show_language", "label": "Show Language", "default": true },
    { "type": "header", "content": "Header & Colors" },
    { "type": "text", "id": "logo_text", "label": "Logo Text", "default": "MARBLE" },
    { "type": "link_list", "id": "menu", "label": "Menu" },
    { "type": "color", "id": "color_header", "label": "Nav Link Color", "default": "#ffffff" },
    { "type": "color", "id": "color_logo", "label": "Logo Color", "default": "#ffffff" },
    { "type": "color", "id": "color_hero_title", "label": "Hero Title", "default": "#ffffff" },
    { "type": "color", "id": "color_hero_sub", "label": "Hero Sub", "default": "#ffffff" },
    { "type": "color", "id": "color_btn_bg", "label": "Btn Background", "default": "#ffffff" },
    { "type": "color", "id": "color_btn_text", "label": "Btn Text", "default": "#000000" },
    { "type": "header", "content": "Panels" },
    { "type": "image_picker", "id": "image_1", "label": "Left Image" },
    { "type": "text", "id": "heading_1", "label": "Left Heading", "default": "Dress to Impress" },
    { "type": "url", "id": "link_1", "label": "Left Link" },
    { "type": "image_picker", "id": "image_2", "label": "Right Image" },
    { "type": "text", "id": "heading_2", "label": "Right Heading", "default": "Pink is Black" },
    { "type": "url", "id": "link_2", "label": "Right Link" }
  ],
  "presets": [{ "name": "Marble Ultimate" }]
}
{% endschema %}